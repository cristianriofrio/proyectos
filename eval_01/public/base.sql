SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET AUTOCOMMIT = 0;
START TRANSACTION;
SET time_zone = "+00:00";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

CREATE DATABASE IF NOT EXISTS `inventario` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;
USE `inventario`;

CREATE TABLE Proveedores (
    idProveedores INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL,
    direccion VARCHAR(255),
    telefono VARCHAR(20),
    email VARCHAR(100)
);

CREATE TABLE Productos (
    idProductos INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL,
    descripcion TEXT,
    precio DECIMAL(10, 2) NOT NULL,
    stock INT NOT NULL,
    idProveedores INT,
    CONSTRAINT fk_proveedor
        FOREIGN KEY (idProveedores) REFERENCES Proveedores(idProveedores)
        ON DELETE SET NULL
        ON UPDATE CASCADE
);

CREATE TABLE Ordenes_Compra (
    idOrden INT AUTO_INCREMENT PRIMARY KEY,
    idProveedores INT,
    fecha_orden DATE NOT NULL,
    total DECIMAL(10, 2) NOT NULL,
    CONSTRAINT fk_orden_proveedor
        FOREIGN KEY (idProveedores) REFERENCES Proveedores(idProveedores)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;